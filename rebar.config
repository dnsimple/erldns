%%-*- mode: erlang -*-
{cover_enabled, true}.

{erl_opts, [debug_info, fail_on_warning,
            {platform_define, "^[0-9]+", namespaced_types},
            {parse_transform, lager_transform}]}.

{deps, [lager,
        recon,
        folsom,
        poolboy,
        jsx,
        {dns, ".*", {git, "git://github.com/dnsimple/dns_erlang.git", {branch, "master"}}},
        {parse_xfrm_utils, ".*", {git, "git://github.com/sargun/parse_xfrm_utils.git", {branch, "master"}}},
        iso8601
]}.

{profiles, [{test, [{deps, [proper]}]}]}.

{shell, [{apps, [erldns]},
         {config, "erldns.config.example"}]}.

%% This is a rebar3-ism
{overrides, [
    {override, dns,
        [
            {plugins,[
                {provider_asn1, {git, "https://github.com/knusbaum/provider_asn1.git", {tag, "0.2.0"}}}
            ]},
            {provider_hooks, [
                {pre, [
                    {compile, {asn, compile}}
                ]},
                {post, [
                    {clean, {asn, clean}}
                ]}
            ]}
        ]
    }
]}.
